define([],function(){return Backbone.Model.extend({initialize:function(){this.fetchData()},getLogedUser:function(){},login:function(){var n=new Codebird;n.setConsumerKey("YxiSRxmvxZAP8H3ykMK9Ww","BkgyrD3hasEEvksCKGKsLXoKaMDmhCAKciUg2WTgX8");n.__call("oauth_requestToken",{oauth_callback:"http://musicbattl.com/home/callback"},function(t){n.setToken(t.oauth_token,t.oauth_token_secret);musicBattlUtils.saveCookie("oauth_token",t.oauth_token);musicBattlUtils.saveCookie("oauth_token_secret",t.oauth_token_secret);n.__call("oauth_authorize",{},function(n){window.location.href=n})})},logout:function(n){this.url="/api/Account/SignOut/{0}".format(n);this.save(this.usuario,{success:$.proxy(this.onLogoutReturn,this),error:$.proxy(this.onModelError,this)})},onLogoutReturn:function(){musicBattlUtils.deleteCookie("oauth_token");musicBattlUtils.deleteCookie("oauth_token_secret");eventHandler.trigger("onLogoutReturn")},onLoginReturn:function(n,t){n.id=t.changed.UserId;n.profileId=t.changed.ProfileId;master.loginManager.activeLogin=master.loginManager.twitter;eventHandler.trigger("onLoginReturn",n)},onModelError:function(n,t){var i="",r="";i=t.statusText;r=t.responseText;eventHandler.trigger("onLoginError",{});musicBattlUtils.showError(r,i)},fetchData:function(){var i=new Codebird,n={},t=this;n.oauth_token=musicBattlUtils.cookieExists("oauth_token");n.oauth_token_secret=musicBattlUtils.cookieExists("oauth_token_secret");n.oauth_verifier=musicBattlUtils.cookieExists("oauth_verifier");n.oauth_verifier&&(n.oauth_verifier=n.oauth_verifier.replace(/oauth_verifier=/,""),i.setConsumerKey("YxiSRxmvxZAP8H3ykMK9Ww","BkgyrD3hasEEvksCKGKsLXoKaMDmhCAKciUg2WTgX8"),i.setToken(n.oauth_token,n.oauth_token_secret),i.__call("oauth_accessToken",{oauth_verifier:n.oauth_verifier},function(n){i.setToken(n.oauth_token,n.oauth_token_secret);musicBattlUtils.saveCookie("oauth_token",n.oauth_token);musicBattlUtils.saveCookie("oauth_token_secret",n.oauth_token_secret);var r={screen_name:n.screen_name,user_id:n.user_id};i.__call("users_show",r,function(n){var i={};musicBattlUtils.deleteCookie("oauth_verifier");i.name=n.name;i.id=0;i.customId=n.id;i.type=musicBattlUtils.enumLoginType.twitter;i.picture=n.profile_image_url;t.url="/api/Account/SignIn/{0}".format(n.id);t.save({},{success:$.proxy(t.onLoginReturn,t,i),error:$.proxy(t.onModelError,t)})})}))}})});